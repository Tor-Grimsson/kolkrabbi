{"version":3,"file":"RefreshOnFocus.js","names":[],"sources":["../src/live/client-components/live/RefreshOnFocus.tsx"],"sourcesContent":["import {useRouter} from 'next/navigation'\nimport {useEffect} from 'react'\n\nconst focusThrottleInterval = 5_000\n\nexport default function RefreshOnFocus(): null {\n  const router = useRouter()\n\n  useEffect(() => {\n    const controller = new AbortController()\n    let nextFocusRevalidatedAt = 0\n    const callback = () => {\n      const now = Date.now()\n      if (now > nextFocusRevalidatedAt && document.visibilityState !== 'hidden') {\n        router.refresh()\n        nextFocusRevalidatedAt = now + focusThrottleInterval\n      }\n    }\n    const {signal} = controller\n    document.addEventListener('visibilitychange', callback, {passive: true, signal})\n    window.addEventListener('focus', callback, {passive: true, signal})\n    return () => controller.abort()\n  }, [router])\n\n  return null\n}\nRefreshOnFocus.displayName = 'RefreshOnFocus'\n"],"mappings":";;AAGA,MAAM,wBAAwB;AAE9B,SAAwB,iBAAuB;CAC7C,MAAM,SAAS,WAAW;AAE1B,iBAAgB;EACd,MAAM,aAAa,IAAI,iBAAiB;EACxC,IAAI,yBAAyB;EAC7B,MAAM,iBAAiB;GACrB,MAAM,MAAM,KAAK,KAAK;AACtB,OAAI,MAAM,0BAA0B,SAAS,oBAAoB,UAAU;AACzE,WAAO,SAAS;AAChB,6BAAyB,MAAM;;;EAGnC,MAAM,EAAC,WAAU;AACjB,WAAS,iBAAiB,oBAAoB,UAAU;GAAC,SAAS;GAAM;GAAO,CAAC;AAChF,SAAO,iBAAiB,SAAS,UAAU;GAAC,SAAS;GAAM;GAAO,CAAC;AACnE,eAAa,WAAW,OAAO;IAC9B,CAAC,OAAO,CAAC;AAEZ,QAAO;;AAET,eAAe,cAAc"}